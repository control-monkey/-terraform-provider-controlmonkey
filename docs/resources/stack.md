---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cm_stack Resource - terraform-provider-cm"
subcategory: ""
description: |-
  Creates, updates and destroys stacks.
---

# cm_stack (Resource)

Creates, updates and destroys stacks.

## Example Usage

```terraform
resource "cm_stack" "stack" {
  iac_type     = "terraform"
  namespace_id = "ns-123"
  name         = "stack1"
  description  = "first stack test"

  deployment_behavior = {
    deploy_on_push    = "true"
    wait_for_approval = "true"
  }

  vcs_info = {
    provider_id = "vcsp-123"
    repo_name   = "nonExistRepo"
  }

  iac_config = {
    terraform_version  = "1.4.5"
    terragrunt_version = "0.45.3"
  }

  policy = {
    ttl_config = {
      ttl = {
        type  = "hours"
        value = "3"
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `deployment_behavior` (Attributes) The deployment behavior configuration. (see [below for nested schema](#nestedatt--deployment_behavior))
- `iac_type` (String) IaC type of the stack. Allowed values: [terraform, terragrunt].
- `name` (String) The name of the stack.
- `namespace_id` (String) The id of the namespace that contains the stack.
- `vcs_info` (Attributes) The configuration of the version control to which the stack is attached. (see [below for nested schema](#nestedatt--vcs_info))

### Optional

- `description` (String) The description of the stack.
- `iac_config` (Attributes) IaC configuration of the stack. (see [below for nested schema](#nestedatt--iac_config))
- `policy` (Attributes) The policy of the stack. (see [below for nested schema](#nestedatt--policy))
- `run_trigger` (Attributes) Glob patterns to specify additional paths that should trigger a stack run. (see [below for nested schema](#nestedatt--run_trigger))

### Read-Only

- `id` (String) The unique ID of the stack.

<a id="nestedatt--deployment_behavior"></a>
### Nested Schema for `deployment_behavior`

Required:

- `deploy_on_push` (Boolean) Whether to start a deployment on a push event or not.
- `wait_for_approval` (Boolean) Whether to wait to a manual approval before deployment or not.


<a id="nestedatt--vcs_info"></a>
### Nested Schema for `vcs_info`

Required:

- `provider_id` (String) The Control Monkey unique ID of the connected version control system.
- `repo_name` (String) The name of the version control repository.

Optional:

- `branch` (String) The branch that should trigger plan/deployment for the stack. When no branch is given, the default branch of the repository is chosen.
- `path` (String) The path to a chosen directory from the root.


<a id="nestedatt--iac_config"></a>
### Nested Schema for `iac_config`

Optional:

- `terraform_version` (String) the Terraform version that will be used for terraform operations.
- `terragrunt_version` (String) the Terragrunt version that will be used for terragrunt operations.


<a id="nestedatt--policy"></a>
### Nested Schema for `policy`

Optional:

- `ttl_config` (Attributes) The time to live config of the stack policy. (see [below for nested schema](#nestedatt--policy--ttl_config))

<a id="nestedatt--policy--ttl_config"></a>
### Nested Schema for `policy.ttl_config`

Required:

- `ttl` (Attributes) (see [below for nested schema](#nestedatt--policy--ttl_config--ttl))

<a id="nestedatt--policy--ttl_config--ttl"></a>
### Nested Schema for `policy.ttl_config.ttl`

Required:

- `type` (String) The type of the ttl. Allowed values: [hours, days].
- `value` (Number) The value that corresponds the type




<a id="nestedatt--run_trigger"></a>
### Nested Schema for `run_trigger`

Optional:

- `patterns` (List of String) Patterns that trigger a stack run.

## Import

Import is supported using the following syntax:

```shell
terraform import cm_stack.stack id
```
