---
page_title: "cm_namespace Resource - terraform-provider-cm"
subcategory: ""
description: |-
  Creates, updates and destroys namespaces.
---

# cm_namespace (Resource)

Creates, updates and destroys namespaces.

## Example Usage

### Simple namespace
```terraform
resource "cm_namespace" "dev_namespace" {
  name        = "Dev"
  description = "AWS dev env"

  external_credentials = [
    {
      type                    = "awsAssumeRole"
      external_credentials_id = "ext-123"
    }
  ]
}
```

### Namespace that utilizes multiple AWS profiles. A specific AWS profile will be used only when the profile name is specified in the AWS provider block. Otherwise, the default profile will be used.
```terraform
resource "cm_namespace" "dev_cross_account_namespace" {
  name        = "Dev"
  description = "AWS dev env that consists of dev-main, dev-infra & dev-monitoring AWS accounts"

  external_credentials = [
    {
      external_credentials_id = "ext-123" # default credentials
      type                    = "awsAssumeRole"
    },
    {
      external_credentials_id = "ext-456"
      type                    = "awsAssumeRole"
      aws_profile_name        = "dev-infra"
    },
    {
      external_credentials_id = "ext-789"
      type                    = "awsAssumeRole"
      aws_profile_name        = "dev-monitoring"
    }
  ]
}
```

### Namespace with default & max TTL configured. Stacks under this namespace will inherit this TTL configuration by default.
```terraform
resource "cm_namespace" "dev_namespace" {
  name        = "Dev"
  description = "AWS dev env"

  external_credentials = [
    {
      type                    = "awsAssumeRole"
      external_credentials_id = "ext-123"
    }
  ]

  policy = {
    ttl_config = {
      max_ttl = {
        type  = "days"
        value = "2"
      }
      default_ttl = {
        type  = "hours"
        value = "3"
      }
    }
  }
}
```


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the namespace.

### Optional

- `deployment_approval_policy` (Attributes) Set up requirements to approve a deployment (see [below for nested schema](#nestedatt--deployment_approval_policy))
- `description` (String) The description of the namespace.
- `external_credentials` (Attributes List) List of cloud credentials attached to the namespace. (see [below for nested schema](#nestedatt--external_credentials))
- `iac_config` (Attributes) IaC configuration of the namespace. If not overridden, this becomes the default for its stacks. (see [below for nested schema](#nestedatt--iac_config))
- `policy` (Attributes) The policy of the namespace. (see [below for nested schema](#nestedatt--policy))
- `runner_config` (Attributes) Configure the runner settings to specify whether ControlMonkey manages the runner or it is self-hosted. (see [below for nested schema](#nestedatt--runner_config))

### Read-Only

- `id` (String) The unique ID of the namespace.

<a id="nestedatt--deployment_approval_policy"></a>
### Nested Schema for `deployment_approval_policy`

Required:

- `override_behavior` (String) Decide whether stacks can override this configuration. Allowed values: [allow, deny, extended].
- `rules` (Attributes List) Set up rules for approving deployment processes. At least one rule should be configured (see [below for nested schema](#nestedatt--deployment_approval_policy--rules))

<a id="nestedatt--deployment_approval_policy--rules"></a>
### Nested Schema for `deployment_approval_policy.rules`

Required:

- `type` (String) The type of the rule. Allowed values: [requireApproval, autoApprove, requireTwoApprovals].



<a id="nestedatt--external_credentials"></a>
### Nested Schema for `external_credentials`

Required:

- `external_credentials_id` (String) The ControlMonkey unique ID of the credentials.
- `type` (String) The type of the credentials. Allowed values: [awsAssumeRole, gcpServiceAccount, azureServicePrincipal].

Optional:

- `aws_profile_name` (String) Profile name for AWS credentials.


<a id="nestedatt--iac_config"></a>
### Nested Schema for `iac_config`

Optional:

- `opentofu_version` (String) the OpenTofu version that will be used for tofu operations.
- `terraform_version` (String) the Terraform version that will be used for terraform operations.
- `terragrunt_version` (String) the Terragrunt version that will be used for terragrunt operations.


<a id="nestedatt--policy"></a>
### Nested Schema for `policy`

Optional:

- `ttl_config` (Attributes) The time to live config of the namespace policy regarding to its stacks. (see [below for nested schema](#nestedatt--policy--ttl_config))

<a id="nestedatt--policy--ttl_config"></a>
### Nested Schema for `policy.ttl_config`

Required:

- `default_ttl` (Attributes) The default time to live for new stacks in the namespace. (see [below for nested schema](#nestedatt--policy--ttl_config--default_ttl))
- `max_ttl` (Attributes) The max time to live for new stacks in the namespace. (see [below for nested schema](#nestedatt--policy--ttl_config--max_ttl))

<a id="nestedatt--policy--ttl_config--default_ttl"></a>
### Nested Schema for `policy.ttl_config.default_ttl`

Required:

- `type` (String) The type of the ttl. Allowed values: [hours, days].
- `value` (Number) The value that corresponds the type


<a id="nestedatt--policy--ttl_config--max_ttl"></a>
### Nested Schema for `policy.ttl_config.max_ttl`

Required:

- `type` (String) The type of the ttl. Allowed values: [hours, days].
- `value` (Number) The value that corresponds the type




<a id="nestedatt--runner_config"></a>
### Nested Schema for `runner_config`

Required:

- `is_overridable` (Boolean) Determine if stacks within the namespace can override the runner_config.
- `mode` (String) The runner mode. Allowed values: [managed, selfHosted].

Optional:

- `groups` (List of String) In case that `mode` is `selfHosted`, groups must contain at least one runners group. If `mode` is `managed`, this field must not be configures.

## Import

`cm_namespace` can be imported using the ID of the Namespace, e.g.

```shell
terraform import cm_namespace.namespace ns-123
```